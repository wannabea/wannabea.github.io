{"title":"C++ 学习笔记(一)","date":"2019-05-19T09:19:52.316Z","link":"post/Cpp","tags":["C++"],"categories":["C++"],"updated":"2019-05-19T09:18:30.419Z","content":"<p>[TOC]</p>\n<h3 id=\"变量的声明与定义\">变量的声明与定义<a href=\"post/Cpp#变量的声明与定义\"></a></h3><p>声明关键字 <strong>extern</strong> </p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">extern</span> <span class=\"keyword\">int</span> a; <span class=\"comment\">//声明</span></span><br><span class=\"line\"><span class=\"keyword\">int</span> a; \t<span class=\"comment\">//声明并定义</span></span><br><span class=\"line\"><span class=\"keyword\">extern</span> <span class=\"keyword\">int</span> a = <span class=\"number\">1</span>; <span class=\"comment\">//定义</span></span><br></pre></td></tr></table></figure>\n\n<p><strong>变量可以被多次声明,仅可定义一次</strong></p>\n<p><strong>若想在多个文件中同时应用const 对象,需要在const前加extern</strong></p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">extren <span class=\"keyword\">const</span> <span class=\"keyword\">int</span> a = <span class=\"number\">100</span>;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"const-限定符\">const 限定符<a href=\"post/Cpp#const-限定符\"></a></h3><h4 id=\"对const-的引用-简称常量引用\">对const 的引用(简称常量引用)<a href=\"post/Cpp#对const-的引用-简称常量引用\"></a></h4><p>例:</p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">int</span> i = <span class=\"number\">42</span>;</span><br><span class=\"line\">   <span class=\"keyword\">const</span> <span class=\"keyword\">int</span> &amp;r1 = i;</span><br><span class=\"line\">   <span class=\"keyword\">const</span> <span class=\"keyword\">int</span> &amp;r2 = <span class=\"number\">42</span>;</span><br><span class=\"line\">   <span class=\"keyword\">const</span> <span class=\"keyword\">int</span> &amp;r3 = r1 * <span class=\"number\">2</span>;</span><br></pre></td></tr></table></figure>\n\n<p><strong>常量引用可以对非常量执行,但是无法修改引用值,也不能通过引用值修改常量.</strong></p>\n<h4 id=\"指向常量的指针\">指向常量的指针<a href=\"post/Cpp#指向常量的指针\"></a></h4><p>const 可以令指针指向常量或非常量.</p>\n<p>不过指针不能修改所指对象的值.</p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">\t<span class=\"keyword\">const</span> <span class=\"keyword\">double</span> pi = <span class=\"number\">3.14</span>;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> <span class=\"keyword\">double</span> *cptr = &amp;pi;</span><br><span class=\"line\">    <span class=\"built_in\">printf</span>(<span class=\"string\">\"%.2lf\\n\"</span>,*cptr);</span><br><span class=\"line\">    <span class=\"keyword\">double</span> dval = <span class=\"number\">3.16</span>;</span><br><span class=\"line\">    cptr = &amp;dval;</span><br><span class=\"line\">    <span class=\"built_in\">printf</span>(<span class=\"string\">\"%.2lf\\n\"</span>,*cptr);</span><br><span class=\"line\">output:</span><br><span class=\"line\"><span class=\"number\">3.14</span></span><br><span class=\"line\"><span class=\"number\">3.16</span></span><br></pre></td></tr></table></figure>\n\n<p><strong>所谓指向常量的指针,仅仅是指不能通过该指针改变常量的值,但是可以通过其他方式改变</strong></p>\n<h4 id=\"const指针\">const指针<a href=\"post/Cpp#const指针\"></a></h4><p><strong>即指针是对象,把指针本身定位常量</strong></p>\n<p><strong>即指针本身指向不可更改,但可通过其改变其指向的非常量的值</strong></p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">int</span> a = <span class=\"number\">0</span>;</span><br><span class=\"line\"><span class=\"keyword\">int</span> *<span class=\"keyword\">const</span> pa = &amp;a;\t\t\t\t<span class=\"comment\">//常量指针</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"keyword\">double</span> pi = <span class=\"number\">3.14</span>;</span><br><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"keyword\">double</span> *<span class=\"keyword\">const</span> ppi = &amp;pi\t<span class=\"comment\">//指向常量的常量指针</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"顶层const\">顶层const<a href=\"post/Cpp#顶层const\"></a></h4><ul>\n<li><p>顶层const表示指针<strong>本身</strong>是个常量,</p>\n</li>\n<li><p>而底层const表示指针<strong>所指对象</strong>是个常量.</p>\n</li>\n</ul>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">目前所见有</span><br><span class=\"line\"><span class=\"keyword\">int</span> *<span class=\"keyword\">const</span> p = &amp;i; \t\t<span class=\"comment\">//顶层const</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"keyword\">double</span> pi = <span class=\"number\">3.14</span>;\t<span class=\"comment\">//顶层const</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"keyword\">double</span> *ppi = &amp;pi;<span class=\"comment\">//底层const</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"keyword\">int</span> &amp;r = i;\t\t<span class=\"comment\">//用于声明引用的const均为底层const</span></span><br></pre></td></tr></table></figure>\n\n<p>分别const是底层或顶层时,按定义区分即可.</p>\n<p><strong>在底层const对象的拷贝中,拷入与拷出必须拥有相同的底层const资格,或两者两者类型可以进行转换.</strong></p>\n<h4 id=\"常量表达式\">常量表达式<a href=\"post/Cpp#常量表达式\"></a></h4><p><strong>即值不会改变,且值在编译过程中就可得到</strong></p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">例如 </span><br><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"keyword\">int</span> mx = <span class=\"number\">100</span>;</span><br><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"keyword\">int</span> mxx = mx + <span class=\"number\">10</span>;</span><br><span class=\"line\">而如下表达式就不是</span><br><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"keyword\">int</span> x = get_size();\t<span class=\"comment\">//编译过程无法得到其值,须运行时确定</span></span><br><span class=\"line\"><span class=\"keyword\">int</span> y = <span class=\"number\">10</span>;\t\t\t\t<span class=\"comment\">//值不确定</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"constexpr限定符\">constexpr限定符<a href=\"post/Cpp#constexpr限定符\"></a></h4><p><strong>将变量声明为constexpr类型,可由编译器来验证变量的值是否是个常量表达式.</strong></p>\n<p>且可用于声明函数,但此类函数须足够简单,能让编译器编译后即可得到结果.这样的函数,就可以去初始化constexpr变量</p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">constexpr</span> <span class=\"keyword\">int</span> mf = <span class=\"number\">20</span>;</span><br><span class=\"line\"><span class=\"keyword\">constexpr</span> <span class=\"keyword\">int</span> limit = mf + <span class=\"number\">1</span>;</span><br><span class=\"line\"><span class=\"keyword\">constexpr</span> <span class=\"keyword\">int</span> sz = size();\t<span class=\"comment\">//size() 为constexpr函数</span></span><br></pre></td></tr></table></figure>\n\n<p><strong>constexpr 定义的指针和引用初始值受到严格限制.</strong></p>\n<p><u>即定义在任何函数中的变量均不可被constexpr修饰,因为函数体内的变量定义一般并不会存放在固定地址.</u></p>\n<p><strong>注意: 若constexpr定义中存在指针,则此指针为常量指针,即与其指向的对象无关.</strong></p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"keyword\">int</span> *p = &amp;i;\t<span class=\"comment\">//指向常量的指针</span></span><br><span class=\"line\"><span class=\"keyword\">constexpr</span> <span class=\"keyword\">int</span> *q = &amp;j; <span class=\"comment\">//常量指针</span></span><br></pre></td></tr></table></figure>\n\n","next":{"title":"Codeforces Round #561 (Div2)","link":"post/cf561"},"plink":"http://rainyblog.top/post/Cpp/","copyright":{"author":"Rainy","link":"<a href=\"http://rainyblog.top/post/Cpp/\" title=\"C++ 学习笔记(一)\">http://rainyblog.top/post/Cpp/</a>","license":"Attribution-NonCommercial-NoDerivatives 4.0 International (<a href=\"https://creativecommons.org/licenses/by-nc-sa/4.0/\" rel=\"external nofollow noopener\" target=\"_blank\">CC BY-NC-ND 4.0</a>)"}}